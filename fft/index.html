<!DOCTYPE html>
<html>

<head>
	<meta charset='utf-8'>
	<title>FFT</title>
	<meta name='viewport' content='width=device-width, initial-scale=1'>
	<!-- <link rel='stylesheet' type='text/css' media='screen' href='style.css'> -->
</head>

<body>
	<button id="sendMsg">Send Message</button>

	<p id="debugfreq" style="font-size: 3rem;font-weight: 900;"></p>

	<!-- MOBILE DEBUGGING -->
	<script src="//cdn.jsdelivr.net/npm/eruda"></script>
	<script>
		eruda.init();
	</script>
	<script>
		// GAINVAL
		window.PARAMS = {
			ALPHABET: 'ABC123',
			CHAR_DURATION: 0.3,
			RAMP_DURATION: 0.09,
			THRESHOLD: -65, // -65 - APP | +100 - FFT
			TIMEOUT: 550,
			FREQMIN: 17500,
			FREQMAX: 18500,
			FREQERR: 50,
			DATA: 'ABC'
		}
	</script>

	<!-- Script for stringCompare  -->
	<script src="stringSimilarity.js"></script>
	
	<script src="p5.js"></script>
	<script src="p5.sound.js"></script>
	<script src="sonicnet/sonic-coder.js"></script>
	<script src="sonicnet/sonic-socket.js"></script>
	<script src="analyzer.js"></script>
	<script>
		// Generate audio and store as Buffer
		preRun(window.PARAMS.DATA);

		// Play audio from recorded buffer
		sendMsg.onclick = function(){
			if(songBuffer){
				let song = audioContext.createBufferSource();
				song.buffer = songBuffer;
				song.connect(audioContext.destination);
				song.start();
			}
		}
	</script>
</body>

</html>